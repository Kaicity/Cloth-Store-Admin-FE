<app-spinner [isLoading]="isShowLoading"></app-spinner>
<!-- Content Header (Page header) -->
<ng-container class="container-header">
    <div class="container-title" style="margin-left: 0.5vw">
        <h1 i18n="@@employees-title">Đơn Hàng Đặt Hàng hàng</h1>
    </div>
</ng-container>

<ng-container class="container-header">
    <div class="row" style="margin-left: 70vw;">
        <div class="col-auto">
            <c-breadcrumb>
                <c-breadcrumb-item url="#">Trang chủ</c-breadcrumb-item>
                <c-breadcrumb-item [active]="true">Khách Hàng</c-breadcrumb-item>
            </c-breadcrumb>
        </div>
    </div>
</ng-container>

<ng-container class="container-header">
    <div class="row" style="margin-left: 69vw">
        <div class="col-auto d-flex justify-content-between">
            <div class="col-auto">
                <button type="button" class="btn btn-info" style="height: 4vh; width: 2.5vw"
                        (click)="showSeachForm()">
                    <img src="assets/images/seach.png" class="icon-search" style="width: 1vw; height: 2vh">
                </button>
                <button class="btn bg-warning" (click)="showInsertForm()" style="margin-left: 0.4vw">
                    Thêm khách hàng
                </button>
            </div>
        </div>
    </div>
</ng-container>
<br>

<ng-container *ngIf="exportingfulls.length !== 0">
    <app-data-table [columnNumber]="7" [tableFormatClass]="tableFormat" [search]="exportSearch"
                    [data2Show]="exportingfulls">
        <table class="{{tableFormat}}">
            <thead>
            <tr>
                <th>B-ID</th>
                <th>Họ Tên khác hàng</th>
                <th>Tên Sản Phẩm</th>
                <th>Trạng Thái</th>
                <th>Tổng Giá</th>
                <th>Ngày tạo</th>
                <th>Ngày cập nhật</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <ng-container *ngFor="let e of exportingfulls;">
                <tr *ngFor="let t of e.exportingBillTransactions;">
                    <td>{{ e.exportingBill?.code }}</td>
                    <td>{{ e.exportingBill?.customer?.fullName}}</td>
                    <td>{{ t.product?.name }}</td>
                    <td>{{e.exportingBill?.status}}</td>
                    <td>{{ e.exportingBill?.total | currency: 'VND' | slice:1 }}
                        <span class="symbol"
                              style="font-size: 1rem; line-height: 1rem; letter-spacing: 0.1rem; text-decoration: underline">đ</span>
                    </td>
                    <td>{{e.exportingBill?.dateCreated}}</td>
                    <td>{{ e.exportingBill?.dateExport }}</td>

                    <td style="width: 4.5vw">
                        <button mat-icon-button [matMenuTriggerFor]="menu" class="menu-dropdown"
                                (click)="getExportingData(e.exportingBill?.id!, e)">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                    </td>

                </tr>
            </ng-container>
            </tbody>
        </table>

        <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="updateExporting()">
                <mat-icon>edit</mat-icon>
                <span>Sửa</span>
            </button>

            <button mat-menu-item (click)="deleteExporting()">
                <mat-icon>delete</mat-icon>
                <span>Xóa</span>
            </button>

            <button mat-menu-item>
                <mat-icon>list</mat-icon>
                <span>D.Sách HH - VT</span>
            </button>

            <button mat-menu-item>
                <mat-icon>print</mat-icon>
                <span>In</span>
            </button>

            <button mat-menu-item>
                <mat-icon>Excel</mat-icon>
                <span>Xuất File Excel</span>
            </button>

            <button mat-menu-item>
                <mat-icon>money</mat-icon>
                <span>Lập P.Chi</span>
            </button>

            <button mat-menu-item>
                <mat-icon>money</mat-icon>
                <span>Tạo Từ Phiếu Này</span>
            </button>

        </mat-menu>

    </app-data-table>
</ng-container>

<app-alert></app-alert>
<app-add-export #AddWrapper
                [btnName]="isBtnName"
                [customerNames]="ListNameCustomer"
                [exportingBillTransactions]="exportingTransactionInfo"
                [exporting]="exportingInfo"
                [importingStatus]="statusValue"
                [products]="productsName"
                [customerInfor]="customerInfor"
                [productFill]="products"
></app-add-export>










